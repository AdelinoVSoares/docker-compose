<source>
  @type forward
  port 24224
</source>

<match docker.**>
  @type azurestorage

  azure_storage_account    logscontainerop 
  azure_storage_access_key hOrEHO/1QY9Jghq7PN6+Nlknb8pwhXXu9N+4TR1V0mAYCrS6YiA8P0RofVzUZIOo9HEQlQtSVMrs+ASt6sdYcg==
  azure_container          logs
  azure_storage_type       blob
  store_as                 json
  auto_create_container    true
  time_slice_format        %Y%m%d-%H
  path                     logs/
  #azure_object_key_format  %{path}%{time_slice}_%{index}.%{file_extension}
  azure_object_key_format  /%Y/%m/%d/%{time_slice}-%H_%{index}.%{file_extension}  
  # if you want to use ${tag} or %Y/%m/%d/ like syntax in path / s3_object_key_format,
  # need to specify tag for ${tag} and time for %Y/%m/%d in <buffer> argument.
  <buffer tag,time>
    @type file
    path /var/log/fluent/azurestorage
    timekey 1m # 1 min partition
    timekey_wait 1m
    timekey_use_utc true # use utc
  </buffer>
</match>